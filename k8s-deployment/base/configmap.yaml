apiVersion: v1
kind: ConfigMap
metadata:
  name: handmade-config
  namespace: handmade
  labels:
    app: handmade-backend
data:
  # Database Configuration
  db.host: "postgres-service"
  db.port: "5432"
  db.name: "handmade_db"
  
  # Redis Configuration
  redis.host: "redis-service"
  redis.port: "6379"
  
  # Application Configuration
  app.name: "Handmade E-Commerce"
  app.version: "1.0.0"
  
  # Logging Configuration
  logging.level.root: "INFO"
  logging.level.com.handmade: "DEBUG"
  logging.pattern.console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
  
  # Actuator Configuration
  management.endpoints.web.exposure.include: "health,info,metrics,prometheus"
  management.endpoint.health.show-details: "when-authorized"
  
  # CORS Configuration
  cors.allowed.origins: "https://yourdomain.com,https://www.yourdomain.com"
  cors.allowed.methods: "GET,POST,PUT,DELETE,PATCH,OPTIONS"
  cors.allowed.headers: "*"
  cors.allow.credentials: "true"
  
  # JWT Configuration
  jwt.expiration: "86400000"
  jwt.refresh.expiration: "604800000"
  
  # File Upload Configuration
  file.upload.max-size: "10485760"
  file.upload.allowed-types: "image/jpeg,image/png,image/gif,image/webp"
  
  # Pagination Configuration
  pagination.default-page-size: "20"
  pagination.max-page-size: "100"
  
  # Cache Configuration
  cache.ttl.default: "3600"
  cache.ttl.products: "1800"
  cache.ttl.categories: "7200"
  
  # Feature Flags
  feature.payment.enabled: "true"
  feature.reviews.enabled: "true"
  feature.recommendations.enabled: "true"
  
  # External Services
  payment.gateway.url: "https://payment-gateway.example.com"
  email.service.url: "https://email-service.example.com"
  sms.service.url: "https://sms-service.example.com"
  
  # Application Properties
  application.yaml: |
    spring:
      application:
        name: handmade-backend
      jpa:
        hibernate:
          ddl-auto: validate
        show-sql: false
        properties:
          hibernate:
            dialect: org.hibernate.dialect.PostgreSQLDialect
            format_sql: true
            use_sql_comments: true
      jackson:
        serialization:
          write-dates-as-timestamps: false
        time-zone: UTC
      servlet:
        multipart:
          max-file-size: 10MB
          max-request-size: 10MB
    
    server:
      compression:
        enabled: true
        mime-types: text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
        min-response-size: 1024
      http2:
        enabled: true
    
    management:
      metrics:
        export:
          prometheus:
            enabled: true
        distribution:
          percentiles-histogram:
            http.server.requests: true
