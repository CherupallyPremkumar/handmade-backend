<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.handmade.ecommerce.query.service.mapper.platform">

    <select id="search-seller-approvals" resultType="map">
        SELECT 
            s.id as "sellerId",
            s.business_name as "businessName",
            s.platform_id as "platformId",
            s.state_id as "currentState",
            s.email as "email",
            s.verified as "verified",
            s.kyc_completed as "kycCompleted",
            s.created_at as "createdAt"
        FROM seller_account s
        <where>
            <if test="email != null">
                AND s.email LIKE #{email}
            </if>
             <if test="businessName != null">
                AND s.business_name LIKE #{businessName}
            </if>
        </where>
     </select>

    <select id="search-seller-approvals-count" resultType="int">
        SELECT COUNT(*)
        FROM seller_account s
        <where>
            <if test="email != null">
                AND s.email LIKE #{email}
            </if>
             <if test="businessName != null">
                AND s.business_name LIKE #{businessName}
            </if>
        </where>
    </select>
</mapper>
