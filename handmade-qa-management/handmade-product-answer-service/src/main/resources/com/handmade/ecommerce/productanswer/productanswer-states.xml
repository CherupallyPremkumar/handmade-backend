<?xml version="1.0" encoding="UTF-8"?>
<states>
    <event-information eventId="approve" meta-bodyType="com.handmade.ecommerce.qa.dto.ApproveProductAnswerPayload"/>
    <event-information eventId="markHelpful" meta-bodyType="com.handmade.ecommerce.qa.dto.MarkHelpfulProductAnswerPayload"/>
    <event-information eventId="publish" meta-bodyType="com.handmade.ecommerce.qa.dto.PublishProductAnswerPayload"/>
    <event-information eventId="reject" meta-bodyType="com.handmade.ecommerce.qa.dto.RejectProductAnswerPayload"/>
    <event-information eventId="republish" meta-bodyType="com.handmade.ecommerce.qa.dto.RepublishProductAnswerPayload"/>
    <event-information eventId="review" meta-bodyType="com.handmade.ecommerce.qa.dto.ReviewProductAnswerPayload"/>
    <event-information eventId="unpublish" meta-bodyType="com.handmade.ecommerce.qa.dto.UnpublishProductAnswerPayload"/>

    <flow id="productAnswerFlow" default="true">
        <manual-state id="SUBMITTED" initialState="true">
            <on eventId="review" newStateId="UNDER_REVIEW" componentName="com.handmade.ecommerce.productanswer.service.cmds.ReviewProductAnswerAction"/>
            <on eventId="publish" newStateId="PUBLISHED" componentName="com.handmade.ecommerce.productanswer.service.cmds.PublishProductAnswerAction"/>
        </manual-state>

        <manual-state id="UNDER_REVIEW">
            <on eventId="approve" newStateId="PUBLISHED" componentName="com.handmade.ecommerce.productanswer.service.cmds.ApproveProductAnswerAction"/>
            <on eventId="reject" newStateId="REJECTED" componentName="com.handmade.ecommerce.productanswer.service.cmds.RejectProductAnswerAction"/>
        </manual-state>

        <manual-state id="PUBLISHED">
            <on eventId="markHelpful" newStateId="VERIFIED" componentName="com.handmade.ecommerce.productanswer.service.cmds.MarkHelpfulProductAnswerAction"/>
            <on eventId="unpublish" newStateId="UNPUBLISHED" componentName="com.handmade.ecommerce.productanswer.service.cmds.UnpublishProductAnswerAction"/>
        </manual-state>

        <manual-state id="VERIFIED">
            <on eventId="unpublish" newStateId="UNPUBLISHED" componentName="com.handmade.ecommerce.productanswer.service.cmds.UnpublishProductAnswerAction"/>
        </manual-state>

        <manual-state id="UNPUBLISHED">
            <on eventId="republish" newStateId="PUBLISHED" componentName="com.handmade.ecommerce.productanswer.service.cmds.RepublishProductAnswerAction"/>
        </manual-state>

        <manual-state id="REJECTED" meta-endState="true"/>
    </flow>
</states>
