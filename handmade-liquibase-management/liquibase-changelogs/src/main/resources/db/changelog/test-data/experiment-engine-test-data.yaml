databaseChangeLog:
  - changeSet:
      id: test-data-experiment-engine
      author: test
      changes:
        # 1. Define Experiment: Checkout Button Color
        - insert:
            tableName: hm_experiment_definition
            columns:
              - column: { name: id, value: "EXP-001" }
              - column: { name: experiment_key, value: "CHECKOUT_BTN_COLOR" }
              - column: { name: experiment_name, value: "Checkout Button Color Test" }
              - column: { name: description, value: "Testing Red vs Blue button on checkout." }
              - column: { name: state_id, value: "ACTIVE" }
              - column: { name: type, value: "AB_TEST" }
              - column: { name: owner_service, value: "storefront-service" }
              - column: { name: created_time, valueDate: "2024-01-01T00:00:00" }
              - column: { name: tenant, value: "handmade-tenant" }

        # 2. Define Buckets (Variants)
        - insert:
            tableName: hm_experiment_bucket
            columns:
              - column: { name: id, value: "VAR-001" }
              - column: { name: experiment_id, value: "EXP-001" }
              - column: { name: variant_key, value: "CONTROL" }
              - column: { name: payload_json, value: '{"color": "blue"}' }
              - column: { name: allocation_weight, valueNumeric: 50 }
              - column: { name: is_control, valueBoolean: true }
              - column: { name: created_time, valueDate: "2024-01-01T00:00:00" }
              - column: { name: tenant, value: "handmade-tenant" }

        - insert:
            tableName: hm_experiment_bucket
            columns:
              - column: { name: id, value: "VAR-002" }
              - column: { name: experiment_id, value: "EXP-001" }
              - column: { name: variant_key, value: "TREATMENT" }
              - column: { name: payload_json, value: '{"color": "red"}' }
              - column: { name: allocation_weight, valueNumeric: 50 }
              - column: { name: is_control, valueBoolean: false }
              - column: { name: created_time, valueDate: "2024-01-01T00:00:00" }
              - column: { name: tenant, value: "handmade-tenant" }

        # 3. Define Audience (Targeting)
        - insert:
            tableName: hm_experiment_audience
            columns:
              - column: { name: id, value: "AUD-001" }
              - column: { name: experiment_id, value: "EXP-001" }
              - column: { name: rule_name, value: "Mobile Users Only" }
              - column: { name: rule_json, value: '{"device_type": "mobile"}' }
              - column: { name: priority, valueNumeric: 100 }
              - column: { name: created_time, valueDate: "2024-01-01T00:00:00" }
              - column: { name: tenant, value: "handmade-tenant" }

        # 4. Assignment Log (Sample)
        - insert:
            tableName: hm_experiment_assignment
            columns:
              - column: { name: id, value: "ASN-001" }
              - column: { name: experiment_key, value: "CHECKOUT_BTN_COLOR" }
              - column: { name: variant_key, value: "TREATMENT" }
              - column: { name: entity_id, value: "user-123" }
              - column: { name: context_json, value: '{"device": "mobile", "os": "ios"}' }
              - column: { name: assigned_at, valueDate: "2024-01-02T12:00:00" }
              - column: { name: tenant, value: "handmade-tenant" }
