<?xml version="1.0" encoding="UTF-8"?>
<!--
OWIZ Workflows
Description: Orchestrated transaction pipelines
Version: 1.1
-->
<flows>
    <add-command-tag tag="parallel" componentName="org.chenile.owiz.impl.ParallelChain"/>
    <flow id="NOTIFICATIONS_FLOW" triggerEvent="SEND_NOTIFICATION">
        <!-- Step: preparePayload -->
        <command id="preparePayload" componentName="notificationPayloadService" retryLimit="3" retryDelay="1000" timeoutMs="2000" onError="stop"/>
        <!-- Parallel Step: dispatch -->
        <parallel id="dispatch">
            <!-- Step: sendEmail -->
        <command id="sendEmail" componentName="emailDispatchService" retryLimit="3" retryDelay="1000" timeoutMs="5000" onError="stop"/>
            <!-- Step: sendPush -->
        <command id="sendPush" componentName="pushDispatchService" retryLimit="3" retryDelay="1000" timeoutMs="5000" onError="stop"/>
            <!-- Step: sendSms -->
        <command id="sendSms" componentName="smsDispatchService" retryLimit="3" retryDelay="1000" timeoutMs="5000" onError="stop"/>
        </parallel>
    </flow>
</flows>
