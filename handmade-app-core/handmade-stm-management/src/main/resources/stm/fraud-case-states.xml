<?xml version="1.0" encoding="UTF-8"?>
<!--
FraudCase State Machine
Purpose: Manage the lifecycle of FraudCase entities
Flow: FRAUD_CASE_FLOW
-->
<states>
    <event-information eventId='confirm_fraud' 
                       eventName='Confirm fraud' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='dismiss_case' 
                       eventName='Dismiss case' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='escalate_case' 
                       eventName='Escalate case' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='start_investigation' 
                       eventName='Start investigation' 
                       meta-acls="user.normal,user.admin"/>

    <flow id="FRAUD_CASE_FLOW" default="true">
        <manual-state id="OPEN" initialState="true">
            <on eventId="start_investigation" newStateId="UNDER_INVESTIGATION" componentName="fraudStartInvestigationAction"/>
        </manual-state>
        <manual-state id="UNDER_INVESTIGATION">
            <on eventId="confirm_fraud" newStateId="ACTION_TAKEN" componentName="fraudConfirmAction"/>
            <on eventId="dismiss_case" newStateId="CLOSED_NO_FRAUD" componentName="fraudDismissAction"/>
            <on eventId="escalate_case" newStateId="ESCALATED" componentName="fraudEscalateAction"/>
        </manual-state>
        <manual-state id="ESCALATED">
            <on eventId="confirm_fraud" newStateId="ACTION_TAKEN" componentName="fraudConfirmAction"/>
            <on eventId="dismiss_case" newStateId="CLOSED_NO_FRAUD" componentName="fraudDismissAction"/>
        </manual-state>
        <manual-state id="ACTION_TAKEN" meta-endState="true">

        </manual-state>
        <manual-state id="CLOSED_NO_FRAUD" meta-endState="true">

        </manual-state>

    </flow>
</states>
