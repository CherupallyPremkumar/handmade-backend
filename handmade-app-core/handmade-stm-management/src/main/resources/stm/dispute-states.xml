<?xml version="1.0" encoding="UTF-8"?>
<!--
Dispute State Machine
Purpose: Manage the lifecycle of Dispute entities
Flow: DISPUTE_FLOW
-->
<states>
    <event-information eventId='review' 
                       eventName='Review' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='resolve' 
                       eventName='Resolve' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='escalate' 
                       eventName='Escalate' 
                       meta-acls="user.normal,user.admin"/>

    <flow id="DISPUTE_FLOW" default="true">
        <manual-state id="OPEN" initialState="true">
            <on eventId="review" newStateId="UNDER_REVIEW" componentName="disputeReviewAction"/>
            <on eventId="resolve" newStateId="RESOLVED" componentName="disputeResolveAction"/>
            <on eventId="escalate" newStateId="ESCALATED" componentName="disputeEscalateAction"/>
        </manual-state>
        <manual-state id="UNDER_REVIEW">
            <on eventId="resolve" newStateId="RESOLVED" componentName="disputeResolveAction"/>
            <on eventId="escalate" newStateId="ESCALATED" componentName="disputeEscalateAction"/>
        </manual-state>
        <manual-state id="RESOLVED" meta-endState="true">

        </manual-state>
        <manual-state id="ESCALATED">
            <on eventId="review" newStateId="UNDER_REVIEW" componentName="disputeReviewAction"/>
            <on eventId="resolve" newStateId="RESOLVED" componentName="disputeResolveAction"/>
        </manual-state>

    </flow>
</states>
