<?xml version="1.0" encoding="UTF-8"?>
<!--
Payout State Machine
Purpose: Manage the lifecycle of Payout entities
Flow: PAYOUT_FLOW
-->
<states>
    <event-information eventId='confirm_payout' 
                       eventName='Confirm payout' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='fail_payout' 
                       eventName='Fail payout' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='initiate_payout' 
                       eventName='Initiate payout' 
                       meta-acls="user.normal,user.admin"/>

    <flow id="PAYOUT_FLOW" default="true">
        <manual-state id="CREATED" initialState="true">
            <on eventId="initiate_payout" newStateId="PROCESSING" componentName="payoutInitiateAction"/>
            <on eventId="fail_payout" newStateId="FAILED" componentName="payoutFailAction"/>
        </manual-state>
        <manual-state id="PROCESSING">
            <on eventId="confirm_payout" newStateId="PAID" componentName="payoutCompleteAction"/>
            <on eventId="fail_payout" newStateId="FAILED" componentName="payoutFailAction"/>
        </manual-state>
        <manual-state id="PAID" meta-endState="true">

        </manual-state>
        <manual-state id="FAILED" meta-endState="true">

        </manual-state>

    </flow>
</states>
