<?xml version="1.0" encoding="UTF-8"?>
<!--
Refund State Machine
Purpose: Manage the lifecycle of Refund entities
Flow: REFUND_FLOW
-->
<states>
    <event-information eventId='approve_refund' 
                       eventName='Approve refund' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='execute_payment' 
                       eventName='Execute payment' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='reject_refund' 
                       eventName='Reject refund' 
                       meta-acls="user.normal,user.admin"/>

    <flow id="REFUND_FLOW" default="true">
        <manual-state id="REQUESTED" initialState="true">
            <on eventId="approve_refund" newStateId="APPROVED" componentName="refundApproveAction"/>
            <on eventId="reject_refund" newStateId="REJECTED" componentName="refundRejectAction"/>
        </manual-state>
        <manual-state id="APPROVED">
            <on eventId="execute_payment" newStateId="PAID" componentName="refundPaymentAction"/>
        </manual-state>
        <manual-state id="PAID" meta-endState="true">

        </manual-state>
        <manual-state id="REJECTED" meta-endState="true">

        </manual-state>

    </flow>
</states>
