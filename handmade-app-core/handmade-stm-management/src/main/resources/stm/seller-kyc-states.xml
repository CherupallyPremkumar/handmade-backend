<?xml version="1.0" encoding="UTF-8"?>
<!--
SellerVerification State Machine
Purpose: Manage the lifecycle of SellerVerification entities
Flow: SELLER_KYC_FLOW
-->
<states>
    <event-information eventId='reject_kyc' 
                       eventName='Reject kyc' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='request_info' 
                       eventName='Request info' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='resubmit_info' 
                       eventName='Resubmit info' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='revoke_verification' 
                       eventName='Revoke verification' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='start_review' 
                       eventName='Start review' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='verify_kyc' 
                       eventName='Verify kyc' 
                       meta-acls="user.normal,user.admin"/>

    <flow id="SELLER_KYC_FLOW" default="true">
        <manual-state id="SUBMITTED" initialState="true">
            <on eventId="start_review" newStateId="IN_REVIEW" componentName="kycStartReviewAction"/>
        </manual-state>
        <manual-state id="IN_REVIEW">
            <on eventId="verify_kyc" newStateId="VERIFIED" componentName="kycVerifyAction"/>
            <on eventId="reject_kyc" newStateId="REJECTED" componentName="kycRejectAction"/>
            <on eventId="request_info" newStateId="INFO_REQUESTED" componentName="kycRequestInfoAction"/>
        </manual-state>
        <manual-state id="INFO_REQUESTED">
            <on eventId="resubmit_info" newStateId="IN_REVIEW" componentName="kycResubmitAction"/>
        </manual-state>
        <manual-state id="VERIFIED">
            <on eventId="revoke_verification" newStateId="REJECTED" componentName="kycRevokeAction"/>
        </manual-state>
        <manual-state id="REJECTED" meta-endState="true">

        </manual-state>

    </flow>
</states>
