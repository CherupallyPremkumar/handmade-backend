<?xml version="1.0" encoding="UTF-8"?>
<!--
SellerOnboardingCase State Machine
Purpose: Manage the lifecycle of SellerOnboardingCase entities
Flow: onboarding
-->
<states>
    <event-information eventId='confirm-onboarding' 
                       eventName='Confirm-onboarding' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='identity-verified' 
                       eventName='Identity-verified' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='reject' 
                       eventName='Reject' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='start-onboarding' 
                       eventName='Start-onboarding' 
                       meta-acls="user.normal,user.admin"/>
    <event-information eventId='submit-docs' 
                       eventName='Submit-docs' 
                       meta-acls="user.normal,user.admin"/>

    <flow id="onboarding" default="true">
        <manual-state id="DRAFT" initialState="true">
            <on eventId="start-onboarding" newStateId="INITIALIZED" componentName="startOnboardingAction"/>
        </manual-state>
        <manual-state id="INITIALIZED">
            <on eventId="identity-verified" newStateId="VERIFIED_PENDING_DOCS" componentName="identityVerifiedAction"/>
            <on eventId="reject" newStateId="REJECTED" componentName="rejectOnboardingAction"/>
        </manual-state>
        <manual-state id="VERIFIED_PENDING_DOCS">
            <on eventId="confirm-onboarding" newStateId="COMPLETED" componentName="confirmOnboardingAction"/>
            <on eventId="submit-docs" newStateId="VERIFIED_PENDING_DOCS" componentName="submitDocsAction"/>
        </manual-state>
        <manual-state id="COMPLETED" meta-endState="true">

        </manual-state>
        <manual-state id="REJECTED" meta-endState="true">

        </manual-state>

    </flow>
</states>
