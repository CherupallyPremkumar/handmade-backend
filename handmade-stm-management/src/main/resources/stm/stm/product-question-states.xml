<?xml version="1.0" encoding="UTF-8"?>
<states>

    <!-- Product Question Definitions -->
    <event-information eventId='approve' eventName='Approve question'
                       meta-acls="qa.moderator"/>
    <event-information eventId='reject' eventName='Reject question'
                       meta-acls="qa.moderator"/>
    <event-information eventId='restore' eventName='Restore rejected question'
                       meta-acls="qa.moderator"/>
    <event-information eventId='close' eventName='Close question'
                       meta-acls="qa.moderator"/>
    <event-information eventId='reopen' eventName='Reopen closed question'
                       meta-acls="qa.moderator"/>

    <!-- Product Question Flow -->
    <flow id="questionFlow" default="true">

        <!-- PENDING (Initial State) -->
        <manual-state id="PENDING" initialState="true">
            <on eventId="approve" newStateId="APPROVED" componentName="approveQuestionAction"/>
            <on eventId="reject" newStateId="REJECTED" componentName="rejectQuestionAction"/>
        </manual-state>

        <!-- APPROVED (Publicly visible) -->
        <manual-state id="APPROVED">
            <on eventId="close" newStateId="CLOSED" componentName="closeQuestionAction"/>
            <on eventId="reject" newStateId="REJECTED" componentName="rejectQuestionAction"/> <!-- If re-moderated -->
        </manual-state>

        <!-- REJECTED (Final state unless restored) -->
        <manual-state id="REJECTED">
            <on eventId="restore" newStateId="PENDING" componentName="restoreQuestionAction"/>
        </manual-state>

        <!-- CLOSED (No longer accepting answers) -->
        <manual-state id="CLOSED">
            <on eventId="reopen" newStateId="APPROVED" componentName="reopenQuestionAction"/>
            <on eventId="reject" newStateId="REJECTED" componentName="rejectQuestionAction"/>
        </manual-state>

    </flow>

</states>
