<?xml version="1.0" encoding="UTF-8"?>
<states>

    <!-- Seller Onboarding Case Definitions -->
    <event-information eventId='start' eventName='Start onboarding'
                       meta-acls="user.seller"/>
    <event-information eventId='submit' eventName='Submit application'
                       meta-acls="user.seller"/>
    <event-information eventId='approve' eventName='Approve application'
                       meta-acls="admin.onboarding"/>
    <event-information eventId='reject' eventName='Reject application'
                       meta-acls="admin.onboarding"/>
    <event-information eventId='requestChanges' eventName='Request changes'
                       meta-acls="admin.onboarding"/>

    <!-- Seller Onboarding Case Flow -->
    <flow id="sellerOnboardingCaseFlow" default="true">

        <!-- INITIATED (Draft) -->
        <manual-state id="INITIATED" initialState="true">
            <on eventId="submit" newStateId="SUBMITTED" componentName="submitOnboardingCaseAction"/>
        </manual-state>

        <!-- SUBMITTED (Under Review) -->
        <manual-state id="SUBMITTED">
            <on eventId="approve" newStateId="APPROVED" componentName="approveOnboardingCaseAction"/>
            <on eventId="reject" newStateId="REJECTED" componentName="rejectOnboardingCaseAction"/>
            <on eventId="requestChanges" newStateId="INITIATED" componentName="requestOnboardingChangesAction"/>
        </manual-state>

        <!-- APPROVED (Final State) -->
        <manual-state id="APPROVED" meta-endState="true"/>

        <!-- REJECTED (Final State) -->
        <manual-state id="REJECTED" meta-endState="true"/>

    </flow>

</states>
