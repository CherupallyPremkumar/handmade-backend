
<states>
    <flow id="orderFlow" default="true">
        <entry-action componentName="orderEntryAction" />
        <exit-action componentName="orderExitAction" />

        <manual-state id="CREATED" initialState="true">
            <on eventId="confirm" componentName="confirmOrderService" newStateId="CONFIRMED" />
            <on eventId="cancel" componentName="cancelOrderInCreatedService" newStateId="CANCELLED" />
        </manual-state>

        <manual-state id="CONFIRMED">
            <on eventId="process" componentName="processOrderService" newStateId="PROCESSING" />
            <on eventId="cancel" componentName="cancelOrderInConfirmedService" newStateId="CANCELLED" />
        </manual-state>

        <manual-state id="PROCESSING">
            <on eventId="ship" componentName="shipOrderService" newStateId="SHIPPED" />
            <on eventId="cancel" componentName="cancelOrderInProcessingService" newStateId="CANCELLED" />
        </manual-state>

        <manual-state id="SHIPPED">
            <on eventId="deliver" componentName="deliverOrderService" newStateId="DELIVERED" />
            <on eventId="return" componentName="returnOrderInShippedService" newStateId="RETURNED" />
        </manual-state>

        <manual-state id="DELIVERED">
            <on eventId="return" componentName="returnOrderService" newStateId="RETURNED" />
        </manual-state>

        <manual-state id="RETURNED" />
        <manual-state id="CANCELLED" />
    </flow>
</states>
