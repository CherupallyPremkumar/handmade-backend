@startuml payment-psp-selection
!theme plain

title Payment System - PSP Selection (Strategy Pattern)

participant "Payment\nExecutor" as Executor
participant "PSP\nFactory" as Factory
participant "Razorpay\nPSP" as Razorpay
participant "Stripe\nPSP" as Stripe

== INR Payment (India) ==
Executor -> Factory: getPSP(currency="INR")
activate Factory

Factory -> Factory: if (currency == "INR")

note over Factory #lightblue
    Strategy Pattern:
    Select PSP based on currency
end note

Factory --> Executor: RazorpayPSP
deactivate Factory

Executor -> Razorpay: processPayment(order)
activate Razorpay
Razorpay --> Executor: PaymentResult
deactivate Razorpay

note over Executor,Razorpay #lightgreen
    ✓ INR payment processed via Razorpay
end note

== USD Payment (International) ==
Executor -> Factory: getPSP(currency="USD")
activate Factory

Factory -> Factory: else

Factory --> Executor: StripePSP
deactivate Factory

Executor -> Stripe: processPayment(order)
activate Stripe
Stripe --> Executor: PaymentResult
deactivate Stripe

note over Executor,Stripe #lightgreen
    ✓ USD payment processed via Stripe
end note

note over Factory
    **PSP Selection Logic:**
    • INR → Razorpay (India)
    • USD → Stripe (International)
    • EUR → Stripe (International)
    
    Easy to add new PSPs
    without changing executor!
end note

@enduml
