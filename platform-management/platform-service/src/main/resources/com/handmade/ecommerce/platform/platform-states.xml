<!-- Platform State Machine - Manages platform lifecycle -->
<states>
<flow id='PLATFORM_FLOW' default="true">
	<!-- Initial state check -->
	<if id='isBootstrapping' condition="currentState == null || currentState.stateId == 'BOOTSTRAPPING'" then="bootstrapping" else="checkCurrentState" initialState="true">
		<on eventId="bootstrapping" newStateId="BOOTSTRAPPING"/>
		<on eventId="checkCurrentState" newStateId="ACTIVE"/>
	</if>

	<!-- Bootstrapping State -->
	<manual-state id='BOOTSTRAPPING'>
		<on eventId="activate" newStateId="ACTIVE"/>
		<on eventId="delete" newStateId='DELETED'/>
	</manual-state>

	<!-- Active State - Normal Operations -->
	<manual-state id="ACTIVE">
		<!-- State transitions -->
		<on eventId="suspend" newStateId="SUSPENDED"/>
		<on eventId="enterMaintenance" newStateId="MAINTENANCE"/>
		<on eventId="delete" newStateId="DELETED"/>
		
		<!-- Self-transitions for updates -->
		<on eventId="updateBrandIdentity"/>
		<on eventId="reviseCommission"/>
		<on eventId="publishLegalTerms"/>
		<on eventId="updateFeatureConfig"/>
		<on eventId="updateOperationalLimits"/>
	</manual-state>

	<!-- Suspended State - Temporarily Disabled -->
	<manual-state id='SUSPENDED'>
		<on eventId="reactivate" newStateId="ACTIVE"/>
		<on eventId="delete" newStateId="DELETED"/>
	</manual-state>

	<!-- Maintenance State - Read-Only Mode -->
	<manual-state id="MAINTENANCE">
		<on eventId="exitMaintenance" newStateId="ACTIVE"/>
		<on eventId="suspend" newStateId="SUSPENDED"/>
	</manual-state>

	<!-- Deleted State - Terminal State -->
	<manual-state id="DELETED"/>
</flow>
</states>
